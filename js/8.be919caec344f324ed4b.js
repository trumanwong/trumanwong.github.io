(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"1GJp":function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var i=a("XJYT");function l(t){if("string"==typeof t.data)this.$message.error(t.status+" "+t.statusText);else{var e=t.data.errors,a="";Object.keys(e).map((function(t,i){var l=e[t];a+='<span style="color: #e74c3c">'+l[0]+"</span><br>"})),Object(i.Message)({dangerouslyUseHTMLString:!0,message:a})}}},"5j4a":function(t,e,a){"use strict";var i={props:{params:{type:Object,default:""},placeholder:{type:String,default:""}},methods:{search:function(){this.$emit("search",this.params)}}},l=a("KHd+"),n=Object(l.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-6 align-items-center p-0 text-right"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",[a("el-input",{attrs:{placeholder:t.placeholder,clearable:""},on:{input:t.search},model:{value:t.params.keyword,callback:function(e){t.$set(t.params,"keyword",e)},expression:"params.keyword"}})],1),t._v(" "),a("el-form-item",[a("small",[t._t("buttons")],2)])],1)],1)}),[],!1,null,null,null);e.a=n.exports},"9lA8":function(t,e,a){var i=a("Yh6U");"string"==typeof i&&(i=[[t.i,i,""]]);var l={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(i,l);i.locals&&(t.exports=i.locals)},H3OM:function(t,e,a){"use strict";a.r(e);var i={components:{LinkForm:a("VbNM").a}},l=a("KHd+"),n=Object(l.a)(i,(function(){var t=this.$createElement,e=this._self._c||t;return e("vue-form",{attrs:{title:this.$t("form.create_link")}},[e("template",{slot:"buttons"},[e("el-link",{staticStyle:{"text-decoration":"none"},attrs:{icon:"el-icon-back",underline:!1,href:"/dashboard/links"}},[this._v(this._s(this.$t("form.back")))])],1),this._v(" "),e("template",{slot:"content"},[e("link-form")],1)],2)}),[],!1,null,null,null);e.default=n.exports},QZBr:function(t,e,a){"use strict";var i={components:{CustomerFilter:a("5j4a").a},data:function(){return{list:[],total:0,page:1,pageSize:5,keyword:""}},created:function(){this.getTableData()},props:{showFiles:{type:Boolean,default:function(){return!1}},currentRow:{type:Object,default:function(){return{}}}},methods:{getTableData:function(){var t=this;this.$http.get("file",{params:{keyword:this.keyword,page:this.page,per_page:this.pageSize}}).then((function(e){t.list=e.data.data,t.pageSize=e.data.per_page,t.total=e.data.total}))},handleKeywordChange:function(t){this.keyword=t,this.getTableData()},handlePageChange:function(t){this.page=t,this.getTableData()},handleCurrentChange:function(t){this.$emit("setCurrentRow",t)},confirm:function(){this.$emit("setShowFiles",!1),this.$emit("showCurrentRow")}}},l=a("KHd+"),n=Object(l.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"文件列表",visible:t.showFiles},on:{"update:visible":function(e){t.showFiles=e}}},[a("div",[a("el-input",{attrs:{placeholder:"请输入文件名",clearable:""},on:{input:t.handleKeywordChange},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),t._v(" "),a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.list,"highlight-current-row":"",height:"250"},on:{"current-change":t.handleCurrentChange}},[a("el-table-column",{attrs:{fixed:"",type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.name"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-image",{staticStyle:{width:"100px",height:"100px","border-radius":"50%"},attrs:{"preview-src-list":[t.row.path],src:t.row.path}})]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"name",label:t.$t("table.name"),width:"120"}}),t._v(" "),a("el-table-column",{attrs:{property:"mime_type",label:t.$t("table.type")}}),t._v(" "),a("el-table-column",{attrs:{property:"created_at",label:t.$t("table.date")}}),t._v(" "),a("el-table-column",{attrs:{property:"size",label:t.$t("table.size")}})],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.pageSize},on:{"current-change":t.handlePageChange}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.showFiles=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确 定")])],1)],1)}),[],!1,null,null,null);e.a=n.exports},VbNM:function(t,e,a){"use strict";var i=a("1GJp"),l={components:{FileTable:a("QZBr").a},data:function(){return{showFiles:!1,currentRow:null}},props:{link:{type:Object,default:function(){return{image:""}}}},watch:{link:function(){return this.link}},computed:{mode:function(){return this.link.id?"update":"create"}},methods:{setShowFiles:function(t){this.showFiles=t},showCurrentRow:function(){this.link.image=this.currentRow.path,this.link.previewSrcList=[this.currentRow.path]},setCurrentRow:function(t){this.currentRow=t},selectCover:function(){this.showFiles=!0},onSubmit:function(){var t=this;if(this.link.image){var e="link"+(this.link.id?"/"+this.link.id:""),a=this.link.id?"patch":"post";this.$http[a](e,this.link).then((function(e){t.$message.success("You "+t.mode+"d the link information success!"),t.$router.push({name:"dashboard.link"})})).catch((function(t){var e=t.response;Object(i.a)(e)}))}else this.$message.error("The image is required!")}}},n=(a("a1Zl"),a("KHd+")),s=Object(n.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("el-form",{ref:"form",staticClass:"col-sm-6 offset-sm-2",attrs:{model:t.link,"label-width":"80px"}},[a("el-form-item",{attrs:{label:t.$t("form.link_name")}},[a("el-input",{attrs:{placeholder:t.$t("form.link_name"),clearable:""},model:{value:t.link.name,callback:function(e){t.$set(t.link,"name",e)},expression:"link.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("form.link")}},[a("el-input",{attrs:{placeholder:t.$t("form.link"),clearable:""},model:{value:t.link.link,callback:function(e){t.$set(t.link,"link",e)},expression:"link.link"}})],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("form.image")}},[a("div",{staticClass:"upload-box",on:{click:t.selectCover}},[t.link.image?a("el-image",{staticClass:"img-circle image",staticStyle:{width:"100px",height:"100px"},attrs:{src:t.link.image,"preview-src-list":t.link.previewSrcList,alt:t.link.name}}):a("i",{staticClass:"fas fa-image link-image"}),t._v(" "),t.link.image?a("div",{staticClass:"mask"},[a("i",{staticClass:"fas fa-cloud-upload-alt"})]):t._e()],1)]),t._v(" "),a("el-form-item",{attrs:{label:t.$t("form.is_enable")}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.link.status,callback:function(e){t.$set(t.link,"status",e)},expression:"link.status"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v(t._s(t.link.id?t.$t("form.edit"):t.$t("form.create")))])],1)],1),t._v(" "),a("file-table",{attrs:{currentRow:t.currentRow,showFiles:t.showFiles},on:{setShowFiles:t.setShowFiles,showCurrentRow:t.showCurrentRow,setCurrentRow:t.setCurrentRow}})],1)}),[],!1,null,"2388e3fd",null);e.a=s.exports},Yh6U:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".upload-box[data-v-2388e3fd]{position:relative}.link-image[data-v-2388e3fd],.upload-box[data-v-2388e3fd]{width:100px;height:100px}.link-image[data-v-2388e3fd]{display:block;text-align:center;font-size:30px;line-height:100px;border:2px dashed #e7eaec;border-radius:5px;color:#e7eaec}.image[data-v-2388e3fd]{border-radius:5px}input#image[data-v-2388e3fd]{cursor:pointer;opacity:0;z-index:10}.mask[data-v-2388e3fd],input#image[data-v-2388e3fd]{position:absolute;top:0;left:0;width:100px;height:100px;border-radius:5px}.mask[data-v-2388e3fd]{display:none;background-color:rgba(0,0,0,.5);z-index:5;text-align:center;color:hsla(0,0%,100%,.8);line-height:100px;font-size:20px}.upload-box:hover .mask[data-v-2388e3fd]{display:block}",""])},a1Zl:function(t,e,a){"use strict";a("9lA8")}}]);