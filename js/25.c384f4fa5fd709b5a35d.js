(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"1GJp":function(s,t,i){"use strict";i.d(t,"a",(function(){return a}));var e=i("XJYT");function a(s){if("string"==typeof s.data)this.$message.error(s.status+" "+s.statusText);else{var t=s.data.errors,i="";Object.keys(t).map((function(s,e){var a=t[s];i+='<span style="color: #e74c3c">'+a[0]+"</span><br>"})),Object(e.Message)({dangerouslyUseHTMLString:!0,message:i})}}},b8aM:function(s,t,i){"use strict";var e=i("1GJp"),a=i("Kbl0"),o=i.n(a),n={props:{discussion:{type:Object,default:function(){return{}}}},data:function(){return{simplemde:{},tags:[],allTag:[]}},computed:{mode:function(){return this.discussion.id?"update":"create"}},created:function(){this.loadTags()},watch:{discussion:function(){this.tags=this.discussion.tags.data,this.simplemde.value(this.discussion.content_raw)}},mounted:function(){var s=this.$t||this.$i18n.t;this.simplemde=new o.a({element:document.getElementById("editor"),placeholder:s("form.content_placeholder",{type:s("form.discussion")}),autoDownloadFontAwesome:!0})},methods:{loadTags:function(){var s=this;this.$http.get("tags").then((function(t){s.allTag=t.data.data}))},onSubmit:function(){var s=this;if(0!==this.tags.length){var t="discussion"+(this.discussion.id?"/"+this.discussion.id:""),i=this.discussion.id?"patch":"post";this.discussion.tags=JSON.stringify(this.tags),this.discussion.content=this.simplemde.value(),this.$http[i](t,this.discussion).then((function(t){s.$message.success("You "+s.mode+"d the discussion success!"),s.$router.push({name:"dashboard.discussion"})})).catch((function(s){var t=s.response;Object(e.a)(t)}))}else this.$message.error("Tag must select one or more.")}}},c=i("KHd+"),l=Object(c.a)(n,(function(){var s=this,t=s.$createElement,i=s._self._c||t;return i("div",{staticClass:"row"},[i("form",{staticClass:"col-sm-9 offset-sm-1",on:{submit:function(t){return t.preventDefault(),s.onSubmit.apply(null,arguments)}}},[i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"title"}},[s._v(s._s(s.$t("form.title")))]),s._v(" "),i("div",{staticClass:"col-sm-10"},[i("input",{directives:[{name:"model",rawName:"v-model",value:s.discussion.title,expression:"discussion.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",name:"title"},domProps:{value:s.discussion.title},on:{input:function(t){t.target.composing||s.$set(s.discussion,"title",t.target.value)}}})])]),s._v(" "),i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col-sm-2 col-form-label"},[s._v(s._s(s.$t("form.tag")))]),s._v(" "),i("div",{staticClass:"col-sm-10"},[i("el-select",{attrs:{filterable:"",multiple:"",placeholder:s.$t("form.select_tag")},model:{value:s.tags,callback:function(t){s.tags=t},expression:"tags"}},s._l(s.allTag,(function(s){return i("el-option",{key:s.id,attrs:{label:s.tag,value:s.id}})})),1)],1)]),s._v(" "),i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"title"}},[s._v(s._s(s.$t("form.content")))]),s._v(" "),s._m(0)]),s._v(" "),i("div",{staticClass:"form-group row"},[i("div",{staticClass:"col-sm-2 col-form-label"},[s._v("\n        "+s._s(s.$t("form.status"))+"\n      ")]),s._v(" "),i("div",{staticClass:"col-sm-2"},[i("div",{staticClass:"togglebutton",staticStyle:{"margin-top":"6px"}},[i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:s.discussion.status,expression:"discussion.status"}],attrs:{type:"checkbox",name:"status",value:"1"},domProps:{checked:Array.isArray(s.discussion.status)?s._i(s.discussion.status,"1")>-1:s.discussion.status},on:{change:function(t){var i=s.discussion.status,e=t.target,a=!!e.checked;if(Array.isArray(i)){var o=s._i(i,"1");e.checked?o<0&&s.$set(s.discussion,"status",i.concat(["1"])):o>-1&&s.$set(s.discussion,"status",i.slice(0,o).concat(i.slice(o+1)))}else s.$set(s.discussion,"status",a)}}}),s._v(" "),i("span",{staticClass:"toggle"})])])])]),s._v(" "),i("div",{staticClass:"form-group row"},[i("div",{staticClass:"offset-sm-2 col-sm-10"},[i("button",{staticClass:"btn btn-info",attrs:{type:"submit"}},[s._v(s._s(s.discussion.id?s.$t("form.edit"):s.$t("form.create")))])])])])])}),[function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"col-sm-10"},[t("textarea",{attrs:{id:"editor",name:"content"}})])}],!1,null,null,null);t.a=l.exports},vsVs:function(s,t,i){"use strict";i.r(t);var e={components:{DiscussionForm:i("b8aM").a},data:function(){return{discussion:void 0}},mounted:function(){this.loadDiscussion()},methods:{loadDiscussion:function(){var s=this;this.$http.get("discussion/"+this.$route.params.id+"/edit?include=tags").then((function(t){s.discussion=t.data.data}))}}},a=i("KHd+"),o=Object(a.a)(e,(function(){var s=this.$createElement,t=this._self._c||s;return t("vue-form",{attrs:{title:this.$t("form.edit_discussion")}},[t("template",{slot:"buttons"},[t("el-link",{staticStyle:{"text-decoration":"none"},attrs:{icon:"el-icon-back",underline:!1,href:"/dashboard/discussions"}},[this._v(this._s(this.$t("form.back")))])],1),this._v(" "),t("template",{slot:"content"},[t("discussion-form",{attrs:{discussion:this.discussion}})],1)],2)}),[],!1,null,null,null);t.default=o.exports}}]);